                    ┌──────────────┐
                    │  NetworkContext │
                    │  isOnline      │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │  DeviceContext │
                    │ width/height  │
                    │ isMobile/...  │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │ SettingsContext │
                    │ theme/language │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │   UIContext   │
                    │ sidebar/toast │
                    │ loading       │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │   CacheContext │
                    │ cache storage  │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │ StorageContext │
                    │ local/session  │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │ NotificationCtx│
                    │ notifications  │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │   DataContext │
                    │ data / update │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │ DataSyncContext│
                    │ syncNow / auto │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │  AuthContext  │
                    │ user / login  │
                    │ tokenService  │
                    └───────┬───────┘
                            │
                            ▼
                    ┌──────────────┐
                    │   APIContext  │
                    │ fetch/get/post│
                    │ PUT/DELETE    │
                    └──────────────┘

Luồng dữ liệu chính
NetworkContext → DataSyncContext

Nếu offline → auto-sync / manual sync bị block.

AuthContext ↔ APIContext

AuthContext login / refresh token dùng APIContext.

DataContext ↔ DataSyncContext

syncNow() gọi loadData() để update DataContext.

UIContext

Các module khác (Auth, Data, DataSync) gửi toast hoặc loading state về UIContext.

CacheContext / StorageContext

DataSync lưu lastSync vào StorageContext; cache tạm lưu data.

NotificationContext

Các toast hoặc alert có thể đồng thời đẩy vào NotificationContext để UI hiển thị.

SettingsContext / DeviceContext

Thông tin theme / layout / responsive được UIContext + App render sử dụng.

Flow summary
APIContext là trung tâm gọi network

AuthContext quản lý token + user

DataContext quản lý app state

DataSyncContext đảm bảo đồng bộ data

UIContext + NotificationContext phản hồi user

CacheContext + StorageContext lưu tạm/luu lâu dài

NetworkContext & DeviceContext & SettingsContext hỗ trợ decision logic + UI render