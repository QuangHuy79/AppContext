Phase 1 â€“ Step 1
ğŸ§© Tá»•ng quan logic
File nÃ y lÃ  root provider â€” quáº£n lÃ½ toÃ n bá»™ tree context, khá»Ÿi táº¡o reducer, Ä‘á»“ng bá»™ state giá»¯a cÃ¡c module (Network, Device, Settings, UI...), vÃ  láº¯ng nghe cÃ¡c sá»± kiá»‡n toÃ n cá»¥c nhÆ° online/offline hoáº·c toast.

âœ… Äiá»ƒm Ä‘Ãºng & máº¡ch cháº¡y chuáº©n
Má»¥c	MÃ´ táº£	Káº¿t quáº£
1. useReducer khá»Ÿi táº¡o Ä‘Ãºng	useReducer(appReducer, initialAppState) â†’ táº¡o AppState chuáº©n theo cáº¥u trÃºc reducer	âœ…
2. Gá»i hooks con	Gá»i useNetwork, useDevice, useSettings, useUI Ä‘á»ƒ láº¥y runtime data	âœ…
3. Äá»“ng bá»™ state context con	DÃ¹ng useEffect Ä‘á»ƒ dispatch thay Ä‘á»•i tá»« cÃ¡c context con vÃ o AppReducer	âœ… Cá»±c chuáº©n
4. Toast listener	Khi UIContext phÃ¡t toast má»›i, toastService.show() Ä‘Æ°á»£c gá»i vÃ  xÃ³a sau khi hiá»ƒn thá»‹	âœ… Ráº¥t tá»‘t
5. Láº¯ng nghe network event	Gáº¯n listener window.addEventListener('online'/'offline') vÃ  dispatch phÃ¹ há»£p	âœ…
6. Gá»™p state/dispatch báº±ng useMemo	useMemo(() => ({ state, dispatch }), [state, dispatch]) â†’ trÃ¡nh re-render	âœ…
7. Cáº¥u trÃºc provider Ä‘Ãºng dependency	Settings â†’ Network â†’ Device â†’ UI â†’ Cache â†’ Storage â†’ API â†’ Auth â†’ Data â†’ DataSync	âœ… (Ä‘Ãºng hÆ°á»›ng phá»¥ thuá»™c logic)
8. ToastProvider náº±m ngoÃ i táº¥t cáº£	ÄÃºng, vÃ¬ cáº§n hoáº¡t Ä‘á»™ng toÃ n cá»¥c cho má»i context	âœ…
âš ï¸ Nhá»¯ng Ä‘iá»ƒm cáº§n chÃº Ã½ khi test Integration
AppContext chÆ°a Ä‘Æ°á»£c sá»­ dá»¥ng á»Ÿ Ä‘Ã¢u cáº£.
â†’ CÃ³ thá»ƒ AppProvider chÆ°a bá»c AppContext.Provider bÃªn trong, nÃªn useApp() thá»±c ra tráº£ vá» context rá»—ng.
Hiá»‡n báº¡n khai bÃ¡o:

export const AppContext = createContext({
  state: initialAppState,
  dispatch: () => {},
});
NhÆ°ng trong return, báº¡n chÆ°a cÃ³ dÃ²ng:

<AppContext.Provider value={value}> ... </AppContext.Provider>
â†’ Do Ä‘Ã³, cÃ¡c hook useApp, useAppState, useAppDispatch sáº½ khÃ´ng nháº­n Ä‘Æ°á»£c state tháº­t â€” Ä‘Ã¢y lÃ  váº¥n Ä‘á» lá»›n nháº¥t náº¿u integration test bÃ¡o lá»—i state undefined hoáº·c get of undefined.
âœ… CÃ¡ch fix chuáº©n:

return (
  <AppContext.Provider value={value}>
    <ToastProvider>
      <SettingsProvider>
        <NetworkProvider>
          <DeviceProvider>
            <UIProvider>
              <CacheProvider>
                <StorageProvider>
                  <APIProvider>
                    <AuthProvider>
                      <DataProvider>
                        <DataSyncProvider>{children}</DataSyncProvider>
                      </DataProvider>
                    </AuthProvider>
                  </APIProvider>
                </StorageProvider>
              </CacheProvider>
            </UIProvider>
          </DeviceProvider>
        </NetworkProvider>
      </SettingsProvider>
    </ToastProvider>
  </AppContext.Provider>
);
â†’ Khi cÃ³ AppContext.Provider bá»c ngoÃ i cÃ¹ng, táº¥t cáº£ hooks useApp* má»›i truy cáº­p Ä‘Æ°á»£c Ä‘Ãºng giÃ¡ trá»‹.

ğŸ§­ Luá»“ng cháº¡y tá»•ng quÃ¡t (sau khi thÃªm Provider)
AppContext.Provider
 â”œâ”€â”€ ToastProvider
 â”‚    â””â”€â”€ toastService hoáº¡t Ä‘á»™ng
 â”œâ”€â”€ SettingsProvider â†’ theme, locale
 â”œâ”€â”€ NetworkProvider â†’ online/offline
 â”œâ”€â”€ DeviceProvider â†’ screen/orientation
 â”œâ”€â”€ UIProvider â†’ toast, modal, theme sync
 â”œâ”€â”€ CacheProvider â†’ memory cache
 â”œâ”€â”€ StorageProvider â†’ localStorage/session
 â”œâ”€â”€ APIProvider â†’ fetch API
 â”œâ”€â”€ AuthProvider â†’ token, login/logout
 â”œâ”€â”€ DataProvider â†’ dataService
 â””â”€â”€ DataSyncProvider â†’ Ä‘á»“ng bá»™ dá»¯ liá»‡u
ğŸ’¬ TÃ³m láº¡i
Háº¡ng má»¥c	Tráº¡ng thÃ¡i	Ghi chÃº
Reducer setup	âœ…	Chuáº©n
Hook sync logic	âœ…	ÄÃºng
Toast service	âœ…	Hoáº¡t Ä‘á»™ng
Network listener	âœ…	Ok
Provider chain	âš ï¸ Thiáº¿u AppContext.Provider bá»c ngoÃ i	Cáº§n thÃªm
Context export hooks	âš ï¸	Sáº½ tráº£ initialAppState rá»—ng náº¿u chÆ°a fix